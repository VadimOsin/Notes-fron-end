{"ast":null,"code":"import _regeneratorRuntime from\"D:/PET Project/Memo/memo/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/PET Project/Memo/memo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"D:/PET Project/Memo/memo/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/PET Project/Memo/memo/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/PET Project/Memo/memo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Button from'react-bootstrap/Button';import Form from'react-bootstrap/Form';import'bootstrap/dist/css/bootstrap.min.css';import'./CSS/Login.css';import{useContext,useState}from\"react\";import axios from\"axios\";import{userContext}from\"../context/userContext\";import{Link,useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState({userName:'',password:''}),_useState2=_slicedToArray(_useState,2),log=_useState2[0],setLog=_useState2[1];var navigate=useNavigate();var _useContext=useContext(userContext),setUser=_useContext.setUser;var onChange=function onChange(_ref){var _ref$target=_ref.target,name=_ref$target.name,value=_ref$target.value;setLog(_objectSpread(_objectSpread({},log),{},_defineProperty({},name,value)));};var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(event){event.preventDefault();}_context.prev=1;_context.next=4;return axios({method:'post',url:'http://localhost:8080/api/login',data:{\"userName\":log.userName,\"password\":log.password}});case 4:response=_context.sent;setUser({id:response.data.id,userName:response.data.username,password:response.data.password,role:response.data.role,isAuth:true});navigate(\"/\");_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);alert(_context.t0.data);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Form,{className:\"login\",onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicEmail\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"UserName\"}),/*#__PURE__*/_jsx(Form.Control,{placeholder:\"userName\",name:\"userName\",value:log.userName,onChange:onChange})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Password\",name:\"password\",value:log.password,onChange:onChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-footer\",children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Submit\"}),/*#__PURE__*/_jsx(Form.Text,{id:\"passwordHelpBlock\",muted:true,className:\"login-linkReg\",children:/*#__PURE__*/_jsx(Link,{to:\"/registration\",children:\"Registration\"})})]})]});}export default Login;","map":{"version":3,"names":["Button","Form","useContext","useState","axios","userContext","Link","useNavigate","Login","userName","password","log","setLog","navigate","setUser","onChange","target","name","value","onSubmit","event","preventDefault","method","url","data","response","id","username","role","isAuth","alert"],"sources":["D:/PET Project/Memo/memo/src/Components/Login.js"],"sourcesContent":["import Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './CSS/Login.css'\r\nimport {useContext, useState} from \"react\";\r\nimport axios from \"axios\";\r\nimport {userContext} from \"../context/userContext\";\r\nimport {Link, useNavigate} from \"react-router-dom\";\r\n\r\n\r\nfunction Login() {\r\n    const [log, setLog] = useState({\r\n        userName: '', password: ''\r\n    });\r\n\r\n    let navigate = useNavigate();\r\n\r\n    const {setUser} = useContext(userContext)\r\n\r\n    const onChange = ({target: {name, value}}) => {\r\n        setLog({...log, [name]: value})\r\n    };\r\n    const onSubmit = async (event) => {\r\n        if (event) {\r\n            event.preventDefault();\r\n        }\r\n\r\n        try {\r\n            const response = await axios({\r\n                method: 'post',\r\n                url: 'http://localhost:8080/api/login',\r\n                data: {\r\n                    \"userName\": log.userName,\r\n                    \"password\": log.password\r\n                }\r\n            })\r\n            setUser({\r\n                id: response.data.id,\r\n                userName: response.data.username,\r\n                password: response.data.password,\r\n                role: response.data.role,\r\n                isAuth: true\r\n            })\r\n            navigate(\"/\")\r\n        } catch (e) {\r\n            alert(e.data)\r\n        }\r\n    };\r\n    return (\r\n        <Form className=\"login\" onSubmit={onSubmit}>\r\n            <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n                <Form.Label>UserName</Form.Label>\r\n                <Form.Control placeholder=\"userName\" name=\"userName\"\r\n                              value={log.userName}\r\n                              onChange={onChange}/>\r\n            </Form.Group>\r\n\r\n            <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                <Form.Label>Password</Form.Label>\r\n                <Form.Control type=\"password\" placeholder=\"Password\" name=\"password\"\r\n                              value={log.password}\r\n                              onChange={onChange}/>\r\n            </Form.Group>\r\n            <div className=\"login-footer\">\r\n                <Button variant=\"primary\" type=\"submit\">\r\n                    Submit\r\n                </Button>\r\n                <Form.Text id=\"passwordHelpBlock\" muted className=\"login-linkReg\">\r\n                    <Link to=\"/registration\">Registration</Link>\r\n                </Form.Text>\r\n            </div>\r\n        </Form>\r\n    );\r\n}\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}