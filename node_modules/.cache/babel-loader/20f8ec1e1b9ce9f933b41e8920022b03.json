{"ast":null,"code":"import _defineProperty from\"D:/PET Project/Memo/memo/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/PET Project/Memo/memo/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/PET Project/Memo/memo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from'react';import'./CSS/newItem.css';import Button from'react-bootstrap/Button';import{userContext}from\"../context/userContext\";import ModalWindow from\"./Modal\";import axios from\"axios\";import{useDispatch}from\"react-redux\";import{addPost}from\"../store/actionCreators/postActionCreator\";import{PATH}from\"../config/config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NewItem=function NewItem(){var dispatch=useDispatch();var _useContext=useContext(userContext),user=_useContext.user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var handleShow=function handleShow(){return setShow(true);};var _useState3=useState({title:'',content:''}),_useState4=_slicedToArray(_useState3,2),newPost=_useState4[0],setNewPost=_useState4[1];var onChange=function onChange(_ref){var _ref$target=_ref.target,name=_ref$target.name,value=_ref$target.value;setNewPost(_objectSpread(_objectSpread({},newPost),{},_defineProperty({},name,value)));};var addNewPost=function addNewPost(){axios({method:'post',url:\"\".concat(PATH,\"/post\"),data:{\"title\":newPost.title,\"content\":newPost.content,\"userId\":user.id}}).then(function(response){dispatch(addPost({id:response.data.id,title:response.data.title,content:response.data.content}));}).catch(function(error){alert(\"Create new post Error\"+error);});setNewPost({title:'',content:''});setShow(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"newItem\",children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"newItem-add\",onClick:handleShow,children:\"+\"}),/*#__PURE__*/_jsx(ModalWindow,{show:show,setShow:setShow,content:newPost.content,post:newPost,btnTitle:\"Add\",onChange:onChange,handleEdit:addNewPost})]});};export default NewItem;","map":{"version":3,"names":["React","useState","useContext","Button","userContext","ModalWindow","axios","useDispatch","addPost","PATH","NewItem","dispatch","user","show","setShow","handleShow","title","content","newPost","setNewPost","onChange","target","name","value","addNewPost","method","url","data","id","then","response","catch","error","alert"],"sources":["D:/PET Project/Memo/memo/src/Components/newItem.js"],"sourcesContent":["import React, {useState, useContext} from 'react';\r\nimport './CSS/newItem.css'\r\nimport Button from 'react-bootstrap/Button';\r\nimport {userContext} from \"../context/userContext\";\r\nimport ModalWindow from \"./Modal\";\r\nimport axios from \"axios\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {addPost} from \"../store/actionCreators/postActionCreator\";\r\nimport {PATH} from \"../config/config\";\r\n\r\nconst NewItem = () => {\r\n    const dispatch = useDispatch()\r\n    const {user} = useContext(userContext)\r\n    const [show, setShow] = useState(false);\r\n    const handleShow = () => setShow(true);\r\n    const [newPost, setNewPost] = useState({\r\n        title: '',\r\n        content: ''\r\n    })\r\n    const onChange = ({target: {name, value}}) => {\r\n        setNewPost({...newPost, [name]: value})\r\n    };\r\n    const addNewPost = () => {\r\n        axios({\r\n            method: 'post',\r\n            url: `${PATH}/post`,\r\n            data: {\r\n                \"title\": newPost.title,\r\n                \"content\": newPost.content,\r\n                \"userId\": user.id\r\n            }\r\n        }).then((response) => {\r\n            dispatch(addPost({\r\n                id: response.data.id,\r\n                title: response.data.title,\r\n                content: response.data.content\r\n            }))\r\n        }).catch((error) => {\r\n            alert(\"Create new post Error\" + error)\r\n        })\r\n        setNewPost({\r\n            title: '',\r\n            content: ''\r\n        })\r\n        setShow(false)\r\n    }\r\n    return (\r\n        <div className=\"newItem\">\r\n            <Button variant=\"primary\" className=\"newItem-add\" onClick={handleShow}>+</Button>\r\n            <ModalWindow show={show} setShow={setShow} content={newPost.content} post={newPost}\r\n                         btnTitle={\"Add\"} onChange={onChange} handleEdit={addNewPost}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NewItem;"],"mappings":"2UAAA,MAAOA,MAAP,EAAeC,QAAf,CAAyBC,UAAzB,KAA0C,OAA1C,CACA,MAAO,mBAAP,CACA,MAAOC,OAAP,KAAmB,wBAAnB,CACA,OAAQC,WAAR,KAA0B,wBAA1B,CACA,MAAOC,YAAP,KAAwB,SAAxB,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAAQC,WAAR,KAA0B,aAA1B,CACA,OAAQC,OAAR,KAAsB,2CAAtB,CACA,OAAQC,IAAR,KAAmB,kBAAnB,C,wFAEA,GAAMC,QAAO,CAAG,QAAVA,QAAU,EAAM,CAClB,GAAMC,SAAQ,CAAGJ,WAAW,EAA5B,CACA,gBAAeL,UAAU,CAACE,WAAD,CAAzB,CAAOQ,IAAP,aAAOA,IAAP,CACA,cAAwBX,QAAQ,CAAC,KAAD,CAAhC,wCAAOY,IAAP,eAAaC,OAAb,eACA,GAAMC,WAAU,CAAG,QAAbA,WAAa,SAAMD,QAAO,CAAC,IAAD,CAAb,EAAnB,CACA,eAA8Bb,QAAQ,CAAC,CACnCe,KAAK,CAAE,EAD4B,CAEnCC,OAAO,CAAE,EAF0B,CAAD,CAAtC,yCAAOC,OAAP,eAAgBC,UAAhB,eAIA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,MAA6B,sBAA3BC,MAA2B,CAAlBC,IAAkB,aAAlBA,IAAkB,CAAZC,KAAY,aAAZA,KAAY,CAC1CJ,UAAU,gCAAKD,OAAL,wBAAeI,IAAf,CAAsBC,KAAtB,GAAV,CACH,CAFD,CAGA,GAAMC,WAAU,CAAG,QAAbA,WAAa,EAAM,CACrBlB,KAAK,CAAC,CACFmB,MAAM,CAAE,MADN,CAEFC,GAAG,WAAKjB,IAAL,SAFD,CAGFkB,IAAI,CAAE,CACF,QAAST,OAAO,CAACF,KADf,CAEF,UAAWE,OAAO,CAACD,OAFjB,CAGF,SAAUL,IAAI,CAACgB,EAHb,CAHJ,CAAD,CAAL,CAQGC,IARH,CAQQ,SAACC,QAAD,CAAc,CAClBnB,QAAQ,CAACH,OAAO,CAAC,CACboB,EAAE,CAAEE,QAAQ,CAACH,IAAT,CAAcC,EADL,CAEbZ,KAAK,CAAEc,QAAQ,CAACH,IAAT,CAAcX,KAFR,CAGbC,OAAO,CAAEa,QAAQ,CAACH,IAAT,CAAcV,OAHV,CAAD,CAAR,CAAR,CAKH,CAdD,EAcGc,KAdH,CAcS,SAACC,KAAD,CAAW,CAChBC,KAAK,CAAC,wBAA0BD,KAA3B,CAAL,CACH,CAhBD,EAiBAb,UAAU,CAAC,CACPH,KAAK,CAAE,EADA,CAEPC,OAAO,CAAE,EAFF,CAAD,CAAV,CAIAH,OAAO,CAAC,KAAD,CAAP,CACH,CAvBD,CAwBA,mBACI,aAAK,SAAS,CAAC,SAAf,wBACI,KAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,SAAS,CAAC,aAApC,CAAkD,OAAO,CAAEC,UAA3D,eADJ,cAEI,KAAC,WAAD,EAAa,IAAI,CAAEF,IAAnB,CAAyB,OAAO,CAAEC,OAAlC,CAA2C,OAAO,CAAEI,OAAO,CAACD,OAA5D,CAAqE,IAAI,CAAEC,OAA3E,CACa,QAAQ,CAAE,KADvB,CAC8B,QAAQ,CAAEE,QADxC,CACkD,UAAU,CAAEI,UAD9D,EAFJ,GADJ,CAOH,CA3CD,CA6CA,cAAed,QAAf"},"metadata":{},"sourceType":"module"}