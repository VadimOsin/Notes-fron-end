{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport CardItem from \"./Card\";\nimport { useContext } from \"react\";\nimport { userContext } from \"../context/userContext\";\nimport axios from \"axios\";\nimport { useState } from \"react\";\nimport './CSS/ListItems.css';\nimport ModalWindow from \"./Modal\";\nimport { store } from \"../store/store\";\nimport { putPost, getPost, deletePost } from '../store/actionCreators/postActionsCreator';\nimport { useDispatch } from \"react-redux\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport { PATH } from \"../config/config\";\n\nconst ListItems = _ref => {\n  _s();\n\n  let {\n    post\n  } = _ref;\n  const [show, setShow] = useState(false);\n  const [tempPost, setTempPost] = useState({\n    id: '',\n    title: '',\n    content: ''\n  });\n  const [query, setQuery] = useState(\"\");\n  const {\n    user\n  } = useContext(userContext);\n  const dispatch = useDispatch();\n\n  const onChange = _ref2 => {\n    let {\n      target: {\n        name,\n        value\n      }\n    } = _ref2;\n    setTempPost({ ...tempPost,\n      [name]: value\n    });\n  };\n\n  const handleShow = id => {\n    setShow(true);\n    post.map(i => {\n      if (i.id === id) {\n        setTempPost({\n          id: i.id,\n          title: i.title,\n          content: i.content\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    axios({\n      method: 'get',\n      url: `${PATH}/post?id=${user.id}`\n    }).then(function (response) {\n      dispatch(getPost(response.data));\n    });\n  }, []);\n\n  const deleteHandler = id => {\n    axios({\n      method: 'delete',\n      url: `${PATH}/post/${id}`\n    }).then(() => {\n      dispatch(deletePost(id));\n    }).catch(() => {\n      alert(\"Post delete error\");\n    });\n  };\n\n  const putHandler = () => {\n    post.map(i => {\n      if (i.id === tempPost.id) {\n        if (i.title !== tempPost.title || i.content !== tempPost.content) {\n          axios({\n            method: 'put',\n            url: `${PATH}/post`,\n            data: {\n              id: tempPost.id,\n              title: tempPost.title,\n              content: tempPost.content\n            }\n          }).then(() => {\n            store.dispatch(putPost(tempPost));\n          }).catch(() => {\n            alert(\"Post update error\");\n          });\n        }\n      }\n    });\n    setShow(false);\n  };\n\n  {}\n};\n\n_s(ListItems, \"NfTJyFC4gGS5fUqQByEU2onDyd0=\", false, function () {\n  return [useDispatch];\n});\n\n_c = ListItems;\nexport default ListItems;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListItems\");","map":{"version":3,"names":["React","useEffect","CardItem","useContext","userContext","axios","useState","ModalWindow","store","putPost","getPost","deletePost","useDispatch","Form","Button","PATH","ListItems","post","show","setShow","tempPost","setTempPost","id","title","content","query","setQuery","user","dispatch","onChange","target","name","value","handleShow","map","i","method","url","then","response","data","deleteHandler","catch","alert","putHandler"],"sources":["D:/PET Project/Memo/memo/src/Components/ListItems.js"],"sourcesContent":["import React, {useEffect} from 'react';\r\nimport CardItem from \"./Card\";\r\nimport {useContext} from \"react\";\r\nimport {userContext} from \"../context/userContext\";\r\nimport axios from \"axios\";\r\nimport {useState} from \"react\";\r\nimport './CSS/ListItems.css'\r\nimport ModalWindow from \"./Modal\";\r\nimport {store} from \"../store/store\";\r\nimport {putPost, getPost, deletePost} from '../store/actionCreators/postActionsCreator'\r\nimport {useDispatch} from \"react-redux\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport {PATH} from \"../config/config\";\r\n\r\nconst ListItems = ({post}) => {\r\n        const [show, setShow] = useState(false);\r\n        const [tempPost, setTempPost] = useState({\r\n            id: '', title: '', content: ''\r\n        })\r\n        const [query, setQuery] = useState(\"\")\r\n        const {user} = useContext(userContext)\r\n        const dispatch = useDispatch();\r\n        const onChange = ({target: {name, value}}) => {\r\n            setTempPost({...tempPost, [name]: value})\r\n        };\r\n        const handleShow = (id) => {\r\n            setShow(true)\r\n            post.map((i) => {\r\n                if (i.id === id) {\r\n                    setTempPost({\r\n                        id: i.id,\r\n                        title: i.title,\r\n                        content: i.content\r\n                    })\r\n                }\r\n            })\r\n\r\n        };\r\n\r\n        useEffect(() => {\r\n            axios({\r\n                method: 'get', url: `${PATH}/post?id=${user.id}`,\r\n            }).then(function (response) {\r\n                dispatch(getPost(response.data))\r\n            });\r\n        }, []);\r\n\r\n        const deleteHandler = (id) => {\r\n            axios({\r\n                method: 'delete', url: `${PATH}/post/${id}`,\r\n            }).then(() => {\r\n                dispatch(deletePost(id))\r\n            }).catch(() => {\r\n                alert(\"Post delete error\")\r\n            })\r\n        }\r\n\r\n        const putHandler = () => {\r\n            post.map((i) => {\r\n                if (i.id === tempPost.id) {\r\n                    if (i.title !== tempPost.title || i.content !== tempPost.content) {\r\n                        axios({\r\n                            method: 'put', url: `${PATH}/post`,\r\n                            data: {\r\n                                id: tempPost.id,\r\n                                title: tempPost.title,\r\n                                content: tempPost.content\r\n                            }\r\n                        }).then(() => {\r\n                            store.dispatch(putPost(tempPost))\r\n                        }).catch(() => {\r\n                            alert(\"Post update error\")\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n            setShow(false)\r\n        }\r\n\r\n        {\r\n            \r\n        }\r\n    }\r\n\r\n;\r\n\r\nexport default ListItems;"],"mappings":"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"},"metadata":{},"sourceType":"module"}