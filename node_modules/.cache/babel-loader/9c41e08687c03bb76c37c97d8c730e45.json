{"ast":null,"code":"var _jsxFileName = \"D:\\\\PET Project\\\\Memo\\\\memo\\\\src\\\\Components\\\\ListItems.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport CardItem from \"./Card\";\nimport { useContext } from \"react\";\nimport { userContext } from \"../context/userContext\";\nimport axios from \"axios\";\nimport { useState } from \"react\";\nimport './CSS/ListItems.css';\nimport ModalWindow from \"./Modal\";\nimport { store } from \"../store/store\";\nimport { putPost, getPost, deletePost } from '../store/actionCreators/postActionCreator';\nimport { useDispatch } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ListItems = _ref => {\n  _s();\n\n  let {\n    post\n  } = _ref;\n  const {\n    user,\n    setUser\n  } = useContext(userContext);\n  const dispatch = useDispatch();\n  const [show, setShow] = useState(false);\n  const [tempPost, setTempPost] = useState({\n    id: '',\n    title: '',\n    content: ''\n  });\n\n  const onChange = _ref2 => {\n    let {\n      target: {\n        name,\n        value\n      }\n    } = _ref2;\n    setTempPost({ ...tempPost,\n      [name]: value\n    });\n  };\n\n  const handleShow = id => {\n    setShow(true);\n    post.map(i => {\n      if (i.id === id) {\n        setTempPost({\n          id: i.id,\n          title: i.title,\n          content: i.content\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    axios({\n      method: 'get',\n      url: `http://localhost:8080/api/post?id=${user.id}`\n    }).then(function (response) {\n      dispatch(getPost(response.data));\n    });\n  }, []);\n\n  const deleteHandler = id => {\n    // axios({\n    //     method: 'delete', url: `http://localhost:8080/api/post/${id}`,\n    // }).then(() => {\n    //     dispatch(deletePost(id))\n    // }).catch(() => {\n    //     alert(\"Post delete error\")\n    // })\n    dispatch(deletePost(id));\n  };\n\n  const putHandler = () => {\n    post.map(i => {\n      if (i.id === tempPost.id) {\n        if (i.title !== tempPost.title || i.content !== tempPost.content) {\n          // axios({\n          //     method: 'put', url: `http://localhost:8080/api/post`,\n          //     data: {\n          //         id: tempPost.id,\n          //         title: tempPost.title,\n          //         content: tempPost.content\n          //     }\n          // }).then(() => {\n          //     store.dispatch(putPost(tempPost))\n          // }).catch(() => {\n          //     alert(\"Post update error\")\n          // })\n          store.dispatch(putPost(tempPost));\n        }\n      }\n    });\n    setShow(false);\n  };\n\n  {\n    if (post.length) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"listItems\",\n          children: [post.map(item => {\n            return /*#__PURE__*/_jsxDEV(CardItem, {\n              post: item,\n              deleteHandler: deleteHandler,\n              handleShow: handleShow\n            }, item.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 36\n            }, this);\n          }), /*#__PURE__*/_jsxDEV(ModalWindow, {\n            show: show,\n            setShow: setShow,\n            post: tempPost,\n            btnTitle: \"Edit\",\n            onChange: onChange,\n            handleEdit: putHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this)\n      }, void 0, false);\n    } else return null;\n  }\n};\n\n_s(ListItems, \"gFZHFi37YlAQYCccdivmelWoxJY=\", false, function () {\n  return [useDispatch];\n});\n\n_c = ListItems;\nexport default ListItems;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListItems\");","map":{"version":3,"names":["React","useEffect","CardItem","useContext","userContext","axios","useState","ModalWindow","store","putPost","getPost","deletePost","useDispatch","ListItems","post","user","setUser","dispatch","show","setShow","tempPost","setTempPost","id","title","content","onChange","target","name","value","handleShow","map","i","method","url","then","response","data","deleteHandler","putHandler","length","item"],"sources":["D:/PET Project/Memo/memo/src/Components/ListItems.js"],"sourcesContent":["import React, {useEffect} from 'react';\r\nimport CardItem from \"./Card\";\r\nimport {useContext} from \"react\";\r\nimport {userContext} from \"../context/userContext\";\r\nimport axios from \"axios\";\r\nimport {useState} from \"react\";\r\nimport './CSS/ListItems.css'\r\nimport ModalWindow from \"./Modal\";\r\nimport {store} from \"../store/store\";\r\nimport {putPost, getPost, deletePost} from '../store/actionCreators/postActionCreator'\r\nimport {useDispatch} from \"react-redux\";\r\n\r\nconst ListItems = ({post}) => {\r\n        const {user, setUser} = useContext(userContext)\r\n        const dispatch = useDispatch();\r\n        const [show, setShow] = useState(false);\r\n        const [tempPost, setTempPost] = useState({\r\n            id: '', title: '', content: ''\r\n        })\r\n        const onChange = ({target: {name, value}}) => {\r\n            setTempPost({...tempPost, [name]: value})\r\n        };\r\n        const handleShow = (id) => {\r\n            setShow(true)\r\n            post.map((i) => {\r\n                if (i.id === id) {\r\n                    setTempPost({\r\n                        id: i.id,\r\n                        title: i.title,\r\n                        content: i.content\r\n                    })\r\n                }\r\n            })\r\n\r\n        };\r\n        useEffect(() => {\r\n            axios({\r\n                method: 'get', url: `http://localhost:8080/api/post?id=${user.id}`,\r\n            }).then(function (response) {\r\n                dispatch(getPost(response.data))\r\n            });\r\n        }, []);\r\n\r\n        const deleteHandler = (id) => {\r\n            // axios({\r\n            //     method: 'delete', url: `http://localhost:8080/api/post/${id}`,\r\n            // }).then(() => {\r\n            //     dispatch(deletePost(id))\r\n            // }).catch(() => {\r\n            //     alert(\"Post delete error\")\r\n            // })\r\n            dispatch(deletePost(id))\r\n        }\r\n\r\n        const putHandler = () => {\r\n            post.map((i) => {\r\n                if (i.id === tempPost.id) {\r\n                    if (i.title !== tempPost.title || i.content !== tempPost.content) {\r\n                        // axios({\r\n                        //     method: 'put', url: `http://localhost:8080/api/post`,\r\n                        //     data: {\r\n                        //         id: tempPost.id,\r\n                        //         title: tempPost.title,\r\n                        //         content: tempPost.content\r\n                        //     }\r\n                        // }).then(() => {\r\n                        //     store.dispatch(putPost(tempPost))\r\n                        // }).catch(() => {\r\n                        //     alert(\"Post update error\")\r\n                        // })\r\n\r\n                        store.dispatch(putPost(tempPost))\r\n                    }\r\n                }\r\n            })\r\n            setShow(false)\r\n        }\r\n\r\n        {\r\n            if (post.length) {\r\n                return (<>\r\n                    <div className=\"listItems\">\r\n                        {post.map((item) => {\r\n                            return <CardItem key={item.id} post={item}\r\n                                             deleteHandler={deleteHandler} handleShow={handleShow}/>\r\n                        })}\r\n                        <ModalWindow show={show} setShow={setShow} post={tempPost}\r\n                                     btnTitle={\"Edit\"} onChange={onChange} handleEdit={putHandler}/>\r\n                    </div>\r\n                </>);\r\n            } else return null;\r\n        }\r\n    }\r\n\r\n;\r\n\r\nexport default ListItems;"],"mappings":"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"},"metadata":{},"sourceType":"module"}