{"ast":null,"code":"import _defineProperty from\"D:/PET Project/Memo/memo/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/PET Project/Memo/memo/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/PET Project/Memo/memo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from'react';import CardItem from\"./Card\";import{useContext}from\"react\";import{userContext}from\"../context/userContext\";import axios from\"axios\";import{useState}from\"react\";import'./CSS/ListItems.css';import ModalWindow from\"./Modal\";import{store}from\"../store/store\";import{putPost,getPost,deletePost}from'../store/actionCreators/postActionCreator';import{useDispatch}from\"react-redux\";import Form from\"react-bootstrap/Form\";import Button from\"react-bootstrap/Button\";import{PATH}from\"../config/config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ListItems=function ListItems(_ref){var post=_ref.post;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState({id:'',title:'',content:''}),_useState4=_slicedToArray(_useState3,2),tempPost=_useState4[0],setTempPost=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),query=_useState6[0],setQuery=_useState6[1];var _useContext=useContext(userContext),user=_useContext.user;var dispatch=useDispatch();var onChange=function onChange(_ref2){var _ref2$target=_ref2.target,name=_ref2$target.name,value=_ref2$target.value;setTempPost(_objectSpread(_objectSpread({},tempPost),{},_defineProperty({},name,value)));};var handleShow=function handleShow(id){setShow(true);post.map(function(i){if(i.id===id){setTempPost({id:i.id,title:i.title,content:i.content});}});};useEffect(function(){axios({method:'get',url:\"\".concat(PATH,\"/post?id=\").concat(user.id)}).then(function(response){dispatch(getPost(response.data));});},[]);var deleteHandler=function deleteHandler(id){axios({method:'delete',url:\"\".concat(PATH,\"/post/\").concat(id)}).then(function(){dispatch(deletePost(id));}).catch(function(){alert(\"Post delete error\");});};var putHandler=function putHandler(){post.map(function(i){if(i.id===tempPost.id){if(i.title!==tempPost.title||i.content!==tempPost.content){axios({method:'put',url:\"\".concat(PATH,\"/post\"),data:{id:tempPost.id,title:tempPost.title,content:tempPost.content}}).then(function(){store.dispatch(putPost(tempPost));}).catch(function(){alert(\"Post update error\");});}}});setShow(false);};{if(post.length){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Form,{className:\"d-flex listItems-search\",children:[/*#__PURE__*/_jsx(Form.Control,{type:\"search\",placeholder:\"Search\",\"aria-label\":\"Search\",onChange:function onChange(event){return setQuery(event.target.value);}}),/*#__PURE__*/_jsx(Button,{variant:\"outline-success\",className:\"listItems-search-btn\",children:\"Search\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"listItems\",children:[post.filter(function(item){if(query===''){return item;}else if(item.title.toLowerCase().includes(query.toLowerCase())){return item;}}).map(function(item){return/*#__PURE__*/_jsx(CardItem,{post:item,deleteHandler:deleteHandler,handleShow:handleShow},item.id);}),/*#__PURE__*/_jsx(ModalWindow,{show:show,setShow:setShow,post:tempPost,btnTitle:\"Edit\",onChange:onChange,handleEdit:putHandler})]})]});}else return null;}};export default ListItems;","map":{"version":3,"names":["React","useEffect","CardItem","useContext","userContext","axios","useState","ModalWindow","store","putPost","getPost","deletePost","useDispatch","Form","Button","PATH","ListItems","post","show","setShow","id","title","content","tempPost","setTempPost","query","setQuery","user","dispatch","onChange","target","name","value","handleShow","map","i","method","url","then","response","data","deleteHandler","catch","alert","putHandler","length","event","filter","item","toLowerCase","includes"],"sources":["D:/PET Project/Memo/memo/src/Components/ListItems.js"],"sourcesContent":["import React, {useEffect} from 'react';\r\nimport CardItem from \"./Card\";\r\nimport {useContext} from \"react\";\r\nimport {userContext} from \"../context/userContext\";\r\nimport axios from \"axios\";\r\nimport {useState} from \"react\";\r\nimport './CSS/ListItems.css'\r\nimport ModalWindow from \"./Modal\";\r\nimport {store} from \"../store/store\";\r\nimport {putPost, getPost, deletePost} from '../store/actionCreators/postActionCreator'\r\nimport {useDispatch} from \"react-redux\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport {PATH} from \"../config/config\";\r\n\r\nconst ListItems = ({post}) => {\r\n        const [show, setShow] = useState(false);\r\n        const [tempPost, setTempPost] = useState({\r\n            id: '', title: '', content: ''\r\n        })\r\n        const [query, setQuery] = useState(\"\")\r\n        const {user} = useContext(userContext)\r\n        const dispatch = useDispatch();\r\n        const onChange = ({target: {name, value}}) => {\r\n            setTempPost({...tempPost, [name]: value})\r\n        };\r\n        const handleShow = (id) => {\r\n            setShow(true)\r\n            post.map((i) => {\r\n                if (i.id === id) {\r\n                    setTempPost({\r\n                        id: i.id,\r\n                        title: i.title,\r\n                        content: i.content\r\n                    })\r\n                }\r\n            })\r\n\r\n        };\r\n\r\n        useEffect(() => {\r\n            axios({\r\n                method: 'get', url: `${PATH}/post?id=${user.id}`,\r\n            }).then(function (response) {\r\n                dispatch(getPost(response.data))\r\n            });\r\n        }, []);\r\n\r\n        const deleteHandler = (id) => {\r\n            axios({\r\n                method: 'delete', url: `${PATH}/post/${id}`,\r\n            }).then(() => {\r\n                dispatch(deletePost(id))\r\n            }).catch(() => {\r\n                alert(\"Post delete error\")\r\n            })\r\n        }\r\n\r\n        const putHandler = () => {\r\n            post.map((i) => {\r\n                if (i.id === tempPost.id) {\r\n                    if (i.title !== tempPost.title || i.content !== tempPost.content) {\r\n                        axios({\r\n                            method: 'put', url: `${PATH}/post`,\r\n                            data: {\r\n                                id: tempPost.id,\r\n                                title: tempPost.title,\r\n                                content: tempPost.content\r\n                            }\r\n                        }).then(() => {\r\n                            store.dispatch(putPost(tempPost))\r\n                        }).catch(() => {\r\n                            alert(\"Post update error\")\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n            setShow(false)\r\n        }\r\n\r\n        {\r\n            if (post.length) {\r\n                return (<>\r\n                    <Form className=\"d-flex listItems-search\">\r\n                        <Form.Control\r\n                            type=\"search\"\r\n                            placeholder=\"Search\"\r\n                            aria-label=\"Search\"\r\n                            onChange={event => setQuery(event.target.value)}\r\n                        />\r\n                        <Button variant=\"outline-success\" className=\"listItems-search-btn\">Search</Button>\r\n                    </Form>\r\n                    <div className=\"listItems\">\r\n                        {post.filter(item => {\r\n                            if (query === '') {\r\n                                return item;\r\n                            } else if (item.title.toLowerCase().includes(query.toLowerCase())) {\r\n                                return item;\r\n                            }\r\n                        }).map((item) => {\r\n                            return <CardItem key={item.id} post={item}\r\n                                             deleteHandler={deleteHandler} handleShow={handleShow}/>\r\n                        })}\r\n                        <ModalWindow show={show} setShow={setShow} post={tempPost}\r\n                                     btnTitle={\"Edit\"} onChange={onChange} handleEdit={putHandler}/>\r\n                    </div>\r\n                </>);\r\n            } else return null;\r\n        }\r\n    }\r\n\r\n;\r\n\r\nexport default ListItems;"],"mappings":"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"},"metadata":{},"sourceType":"module"}